<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>react的基础 | air</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="快快乐乐每一天,开开心心等下班">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.cdd75a34.css" as="style"><link rel="preload" href="/assets/js/app.92907b7c.js" as="script"><link rel="preload" href="/assets/js/3.cd5a62f0.js" as="script"><link rel="preload" href="/assets/js/1.0809a8e1.js" as="script"><link rel="preload" href="/assets/js/7.9a48380b.js" as="script"><link rel="prefetch" href="/assets/js/10.843e6543.js"><link rel="prefetch" href="/assets/js/11.6b3c6fa5.js"><link rel="prefetch" href="/assets/js/12.9c3d8eff.js"><link rel="prefetch" href="/assets/js/13.01af2161.js"><link rel="prefetch" href="/assets/js/14.f585b1a8.js"><link rel="prefetch" href="/assets/js/15.335973e7.js"><link rel="prefetch" href="/assets/js/16.effd1d1c.js"><link rel="prefetch" href="/assets/js/17.1b03a878.js"><link rel="prefetch" href="/assets/js/18.bba3e4bb.js"><link rel="prefetch" href="/assets/js/19.ce737a81.js"><link rel="prefetch" href="/assets/js/20.3a27cb52.js"><link rel="prefetch" href="/assets/js/21.f822047b.js"><link rel="prefetch" href="/assets/js/4.b2b011e6.js"><link rel="prefetch" href="/assets/js/5.8736c666.js"><link rel="prefetch" href="/assets/js/6.f2f1ca07.js"><link rel="prefetch" href="/assets/js/8.cfff21ee.js"><link rel="prefetch" href="/assets/js/9.6d150fd4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cdd75a34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>air</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>快快乐乐每一天,开开心心等下班</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>tan</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/home.png" alt="air" class="logo"> <span class="site-name">air</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      学习笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="iconfont reco-date"></i>
  react
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      在线文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/jo.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    tan
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>11</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>4</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      学习笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="iconfont reco-date"></i>
  react
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      在线文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/recoluan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/docs/theme-reco/" aria-current="page" class="active sidebar-link">react的基础</a></li><li><a href="/docs/theme-reco/theme.html" class="sidebar-link">react脚手架使用</a></li><li><a href="/docs/theme-reco/theme1.html" class="sidebar-link">react-router路由</a></li><li><a href="/docs/theme-reco/theme2.html" class="sidebar-link">redux的使用</a></li><li><a href="/docs/theme-reco/theme3.html" class="sidebar-link">虚拟DOM的diff算法</a></li><li><a href="/docs/theme-reco/theme4.html" class="sidebar-link">移动端开发相关知识</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>react的基础</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>tan</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1aefc0b4><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">react的基础</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>tan</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>5/29/2020</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id=""><a href="#" class="header-anchor">#</a></h2> <ul><li><a href="https://zh-hans.reactjs.org/" target="_blank" rel="noopener noreferrer">React 中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="react-概述"><a href="#react-概述" class="header-anchor">#</a> React 概述</h2> <p>React 是一个用于构建用户界面的 JavaScript 库。</p> <blockquote><p>如果从 MVC 的角度来看，React 仅仅是视图层（V），也就是只负责视图的渲染，而并非提供了 完整的 M 和 C 的功能。
React 起源于 Facebook ,并于 2013 年 5 月开源</p></blockquote> <h2 id="react-三个特点"><a href="#react-三个特点" class="header-anchor">#</a> React 三个特点</h2> <ul><li>1 声明式
<ul><li>JSX 语法是声明式的，只需要描述页面长什么样子</li> <li>React.createElement() 是命令式</li></ul></li> <li>2 组件化
<ul><li>创建拥有各自状态的组件，再由这些组件构成更加复杂的 UI</li> <li>组件逻辑使用 JavaScript 编写而非模版</li></ul></li> <li>3 一次学习，随处编写
<ul><li>不仅可以开发 web 应用（react-dom），还可以开发原生安卓或ios应用（react-native）</li></ul></li></ul> <h2 id="react基本使用"><a href="#react基本使用" class="header-anchor">#</a> React基本使用</h2> <ol><li><p>在html定义一个根标签</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;root&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>引入两个JS文件（ 注意引入顺序 ）</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 提供react核心api--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/react@16/umd/react.development.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 提供了react中操作dom的api--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/react-dom@16/umd/react-dom.development.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>创建react元素(类似html元素)</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 返回值：React元素 </span>
<span class="token comment">// 第一个参数：要创建的React元素名称 字符串</span>
<span class="token comment">// 第二个参数：该React元素的属性 null或者对象 {id: 'box'}</span>
<span class="token comment">// 第三个及其以后的参数：该React元素的子节点 文本或者其他react元素</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Hello React'</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>渲染 react 元素</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="特殊属性"><a href="#特殊属性" class="header-anchor">#</a> 特殊属性</h2> <ul><li>添加样式要使用 className</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> title <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  className<span class="token operator">:</span> <span class="token string">'active'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Hello React'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>label的for属性,要改成htmlFor</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> title <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  htmlFor<span class="token operator">:</span> <span class="token string">'abc'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Hello React'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h2> <blockquote><p>React.createElement()写起来太复杂了,所以推荐使用更加简洁的<strong>jsx</strong></p> <p><strong>JSX</strong>是JavaScript XML,是React提供的Syntax Sugar(语法糖), 能让我们可以在JS中写html标记语言</p></blockquote> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> h1 <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>注意: 浏览器并不认识jsx 所以需要引入babel将jsx编译成React.createElement的形式</strong></p> <blockquote><p>编译 JSX 语法的包为：@babel/preset-react</p></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- babel的 CDN --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 并且script要进行设置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">const</span> h1 <span class="token operator">=</span> <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">&quot;active&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span> 
	ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="jsx中使用-js-表达式"><a href="#jsx中使用-js-表达式" class="header-anchor">#</a> JSX中使用 JS 表达式</h2> <ul><li>JSX中使用JS表达式的语法：<code>{}</code></li> <li>注意：{} 里面可以写表达式,但是不能写语句(比如 if , for 等),</li> <li>注意:   {} 如果要写对象,应该是一个react元素或者是行内样式对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> dv <span class="token operator">=</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;abc&quot;</span><span class="token operator">&gt;</span><span class="token constant">JSX</span>中使用表达式： <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token keyword">const</span> dv <span class="token operator">=</span> <span class="token operator">&lt;</span>div title<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'我是标题'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token constant">JSX</span>中使用表达式： <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token keyword">const</span> dv <span class="token operator">=</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token constant">JSX</span>中使用表达式： <span class="token punctuation">{</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token constant">JSX</span>自身也是合法的<span class="token constant">JS</span>表达式<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="条件渲染"><a href="#条件渲染" class="header-anchor">#</a> 条件渲染</h2> <ul><li>1 if / else</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">let</span> box
 <span class="token keyword">if</span> <span class="token punctuation">(</span>isloading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     box <span class="token operator">=</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
     box <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>数据加载完成<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
 <span class="token punctuation">}</span>
 ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>box<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>2 三元</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> box <span class="token operator">=</span> isLoading <span class="token operator">?</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>数据加载完成<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>box<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>3 &amp;&amp;</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> box <span class="token operator">=</span> isLoading <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>box<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="列表渲染"><a href="#列表渲染" class="header-anchor">#</a> 列表渲染</h2> <ul><li>react中可以将数组中的元素直接渲染到页面上</li> <li>因为jsx的原因,可以直接往数组中存储react对象</li> <li>所以推荐使用数组的 map 方法</li> <li>注意：应该给列表项添加 key 属性</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">let</span> songs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>name<span class="token operator">:</span> <span class="token string">'东风破'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>name<span class="token operator">:</span> <span class="token string">'菊花残'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

 <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token punctuation">{</span>songs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>歌名：<span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

 ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="样式处理"><a href="#样式处理" class="header-anchor">#</a> 样式处理</h2> <ul><li>1 行内样式
<ul><li>如果样式是数值，可以省略单位</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> fontSize<span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>web<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>2 类名（推荐！！！）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;abc&quot;</span><span class="token operator">&gt;</span>web<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>注意:</strong></p> <ol><li>React元素的属性名使用小驼峰命名法</li> <li>没有子节点的React元素可以写成自闭和标签形式</li></ol> <h2 id="事件处理"><a href="#事件处理" class="header-anchor">#</a> 事件处理</h2> <h3 id="绑定事件"><a href="#绑定事件" class="header-anchor">#</a> 绑定事件</h3> <p>React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同：</p> <ul><li>React 事件的命名采用小驼峰式（camelCase），而不是纯小写.比如：onMouseEnter、onFocus</li> <li>使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>事件处理函数<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="事件对象"><a href="#事件对象" class="header-anchor">#</a> 事件对象</h3> <p>React 中的事件对象叫做：合成事件  (兼容所有浏览器，无需担心跨浏览器兼容性问题)</p> <p>**注意: **</p> <ol><li>react中事件处理函数不能使用return false 阻止默认行为.需要使用事件对象的preventDefault()实现</li> <li>如果在控制台打印事件对象,属性值都是null.一定要查看的话,调用事件对象.persist()方法</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//有效</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'事件对象'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span> 
     <span class="token comment">// return false  无效</span>
  <span class="token punctuation">}</span>
 <span class="token keyword">const</span> div <span class="token operator">=</span> <span class="token punctuation">(</span>
   <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">'https://www.baidu.com'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          测试
   <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
 <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h2> <ul><li>需求：实现评论列表功能</li> <li>如果有评论数据，就展示列表结构 li（ 列表渲染 ）要包含a标签
<ul><li>name 表示评论人，渲染 h3</li> <li>content 表示评论内容，渲染 p</li></ul></li> <li>如果没有评论数据，就展示一个 h1 标签，内容为： 暂无评论！</li> <li>根据自己的喜好添加样式</li> <li>给a标签注册点击事件, 打印内容</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token string">'rose, you jump i jump'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'rose'</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token string">'jack, you see you, one day day'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token string">'jack,。。。。。'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="react的组件"><a href="#react的组件" class="header-anchor">#</a> React的组件</h2> <p>组件允许你将 UI 拆分为独立可复用的代码片段，并对每个片段进行独立构思。</p> <p>组件，从概念上类似于 JavaScript 函数。它接受任意的入参（即 “props”），并返回用于描述页面展示内容的 React 元素。</p> <p><strong>一个React应用就是由一个个的组件组成的</strong></p> <img src="/assets/img/组件.2b86c73b.png"> <h2 id="创建组件的两种方式"><a href="#创建组件的两种方式" class="header-anchor">#</a> 创建组件的两种方式</h2> <h3 id="函数组件"><a href="#函数组件" class="header-anchor">#</a> 函数组件</h3> <p>不能定义状态</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> 
<span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是标题组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 函数名就是组件名</span>
ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Header<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Header<span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                
<span class="token comment">// 注意:</span>
<span class="token number">1.</span> 组件名首字母必须大写<span class="token punctuation">.</span> 因为react以此来区分组件和react元素
<span class="token number">2.</span> 必须有返回值<span class="token punctuation">.</span>返回的内容就是组件呈现的结构<span class="token punctuation">,</span> 如果返回值为 <span class="token keyword">null</span>，表示不渲染任何内容
<span class="token number">3.</span> 组件内部如果有多个标签<span class="token punctuation">,</span>必须使用一个根标签包裹<span class="token punctuation">.</span>只能有一个根标签
        
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="类组件"><a href="#类组件" class="header-anchor">#</a> 类组件</h3> <p>可以定义状态(状态: 组件内部私有的数据)</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是标题组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果组件没有子节点,也可以写成自闭和标签</span>
ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//注意: </span>
<span class="token number">1.</span> 组件名首字母必须大写<span class="token punctuation">.</span>
<span class="token number">2.</span> 类组件中必须要声明一个render函数
<span class="token number">3.</span> render函数中必须有返回值<span class="token punctuation">.</span>
<span class="token number">4.</span> 类组件应该继承 React<span class="token punctuation">.</span>Component 父类，从而可以使用父类中提供的方法或属性 
<span class="token number">5.</span> 组件内部如果有多个标签<span class="token punctuation">,</span>必须使用一个根标签包裹<span class="token punctuation">.</span>只能有一个根标签
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="组件的状态-state"><a href="#组件的状态-state" class="header-anchor">#</a> 组件的状态 state</h2> <p>函数组件又叫做无状态组件，类组件又叫做有状态组件</p> <p>状态（state）即数据</p> <p>函数组件没有state,一般只负责渲染静态结构</p> <p>类组件有自己的状态，负责更新 UI，让页面“动” 起来</p> <h3 id="state的基本使用"><a href="#state的基本使用" class="header-anchor">#</a> state的基本使用</h3> <ul><li>状态（state）即数据，是组件内部的私有数据，只能在组件内部使用</li> <li>state 的值是对象，表示一个组件中可以有多个数据</li> <li>获取状态：this.state</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>   
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>  <span class="token comment">// 初始化state   </span>
    <span class="token punctuation">}</span>   
     <span class="token comment">// 简化语法 </span>
    <span class="token comment">// state= { count: 0 } </span>
    
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     
        <span class="token keyword">return</span> <span class="token punctuation">(</span> 
      		<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>     
        <span class="token punctuation">)</span>   
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="操作state"><a href="#操作state" class="header-anchor">#</a> 操作state</h3> <p>语法：this.setState({ 要修改的数据 })</p> <p>注意：不要直接修改 state 中的值，应该使用组件实例的setState方法,修改state的值</p> <p>setState() 作用：</p> <ol><li>修改 state</li> <li>更新UI</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token comment">// 初始化state</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div
            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="setstate的注意点"><a href="#setstate的注意点" class="header-anchor">#</a> setState的注意点</h3> <ul><li><p>连续调用合并问题</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 连续调用.react会将多次合并成一次. 最终执行的是最后一次</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>setState第一个参数传入函数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>count<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span>
<span class="token comment">// 第一个参数除了可以像之前一样传入一个对象之外,还可以传入一个函数.如下</span>
<span class="token comment">// 这个函数,接收一个最新的state和最新的props</span>
<span class="token comment">// 函数要求返回一个对象</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">3</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 最终状态中count的结果是 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>setState将对组件 state 的更改排入队列,所以调用之后,立刻获取this.state拿到的值很有可能是错误的</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>count<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">3</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 这里获取到的state中count的值就是错误的</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 0 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li> <li><p>setState的第二个可选参数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 如果想要在setState之后立刻得到最新的state. 可以使用第二个可以选参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span> 
  <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
   <span class="token comment">//它将在 setState 完成合并并重新渲染组件后执行</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">}</span> 
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h2 id="事件绑定this的指向问题"><a href="#事件绑定this的指向问题" class="header-anchor">#</a> 事件绑定this的指向问题</h2> <p>为了提高代码的阅读性,最好把事件处理函数定义在结构的外面.</p> <p>但是这样就带来了this指向的问题:</p> <p><strong>handle中的this 指向 undefined (原因: bable编译jsx. 采用的是严格模式, 普通函数this就指向undefined)</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token comment">// 初始化state</span>
    <span class="token punctuation">}</span>

    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//这里this指向undefined</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_1-解决this指向-箭头函数"><a href="#_1-解决this指向-箭头函数" class="header-anchor">#</a> 1.解决this指向 - 箭头函数</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token comment">// 初始化state</span>
    <span class="token punctuation">}</span>

    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//这里this指向当前组件实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 解决方式1: 箭头函数</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">（）</span><span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_2-解决this指向-bind"><a href="#_2-解决this指向-bind" class="header-anchor">#</a> 2.解决this指向 - bind</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
     <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token comment">// 初始化state</span>
         <span class="token comment">//解决方式2: bind</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>handle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>

     <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">//这里this指向当前组件实例</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
             count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>

     <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_3-解决this指向-类的实例方法"><a href="#_3-解决this指向-类的实例方法" class="header-anchor">#</a> 3.解决this指向 - 类的实例方法</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
     <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token comment">// 初始化state</span>
     <span class="token punctuation">}</span>
	<span class="token comment">// 解决方式3: 类的实例 (注意:这种语法形式目前处于试验性阶段.但是由于使用了babel,可以放心使用)</span>
     <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">//这里this指向当前组件实例</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
             count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>

     <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="组件的props"><a href="#组件的props" class="header-anchor">#</a> 组件的props</h2> <p>组件是封闭的，要接收外部数据应该通过 props 来实现</p> <p>props的作用：接收传递给组件的数据</p> <p>传递数据：给组件标签添加属性</p> <p>接收数据：函数组件通过参数props接收数据，类组件通过 this.props 接收数据</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">&quot;jack&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span> 
 
<span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> 
  <span class="token keyword">return</span> <span class="token punctuation">(</span> 
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>接收到数据：<span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
  <span class="token punctuation">)</span> 
<span class="token punctuation">}</span> 

<span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span> 
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token punctuation">(</span> 
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>接收到的数据：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
    <span class="token punctuation">)</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="props的特点"><a href="#props的特点" class="header-anchor">#</a> props的特点:</h3> <ol><li>可以给组件传递任意类型的数据</li> <li>props 是只读的对象，只能读取属性的值，不要修改props</li> <li>注意：使用类组件时，如果写了构造函数，应该将 props 传递给 super()，否则，无法在构造函数中获取到 props</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span> 
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 推荐将props传递给父类构造函数 </span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> 
  <span class="token punctuation">}</span> 
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>接收到的数据：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="props校验"><a href="#props校验" class="header-anchor">#</a> props校验</h3> <p>对于组件来说，props 是外来的，无法保证组件使用者传入什么格式的数据</p> <p>如果传入的数据格式不对，可能会导致组件内部报错</p> <p>关键问题：组件的使用者不知道明确的错误原因</p> <p>允许在创建组件的时候，就指定 props 的类型、格式等</p> <p>作用：捕获使用组件时因为props导致的错误，给出明确的错误提示，增加组件的健壮性</p> <p><strong>实现方式:</strong></p> <ol><li>导入 prop-types 包</li> <li>使用propTypes来给组件的props添加校验规则</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//常见类型：array、bool、func、number、object、string还有element(react元素)</span>
<span class="token comment">// 必填项：isRequired </span>
<span class="token comment">// 特定结构的对象：shape({  }) </span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
<span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
         msg<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired 
         list<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>array
         obj<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
          color<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> 
          fontSize<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number  
        <span class="token punctuation">}</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div msg<span class="token operator">=</span><span class="token string">&quot;props校验&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="props默认值"><a href="#props默认值" class="header-anchor">#</a> props默认值</h3> <p>作用：给 props 设置默认值，在未传入 props 时生效</p> <p><strong>实现方式:</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> <span class="token punctuation">(</span> 
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> 
      此处展示props的默认值：<span class="token punctuation">{</span>props<span class="token punctuation">.</span>pageSize<span class="token punctuation">}</span> 
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
  <span class="token punctuation">)</span> 
<span class="token punctuation">}</span> 
<span class="token comment">// 设置默认值 </span>
App<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span> 
  pageSize<span class="token operator">:</span> <span class="token number">10</span> 
<span class="token punctuation">}</span> 
<span class="token comment">// 不传入pageSize属性 </span>
<span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="表单处理"><a href="#表单处理" class="header-anchor">#</a> 表单处理</h2> <h3 id="受控组件"><a href="#受控组件" class="header-anchor">#</a> 受控组件</h3> <p>HTML 中的表单元素是可输入的，也就是有自己的可变状态.而React 中可变状态通常保存在 state 中，并且只能通过 setState() 方法来修改 .React将 state 与表单元素值value绑定到一起，由 state 的值来控制表单元素的值</p> <p><strong>受控组件：其值受到 React 控制的表单元素</strong></p> <h4 id="实现方式"><a href="#实现方式" class="header-anchor">#</a> 实现方式:</h4> <ol><li>在 state 中添加一个状态，作为表单元素的value值（控制表单元素值的来源）</li> <li>给表单元素绑定 change 事件，将 表单元素的值 设置为 state 的值（控制表单元素值的变化）</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token comment">// 初始化state</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//这里this指向当前组件实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            text<span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//补充: 文本框、文本域、下拉框 操作value属性 复选框 操作checked属性 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>多表单元素处理</strong></p> <p>利用柯里化函数实现</p> <blockquote><p>柯里化（Currying），又称部分求值（Partial Evaluation），是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    msg<span class="token operator">:</span> <span class="token string">'文本框'</span><span class="token punctuation">,</span>
    area<span class="token operator">:</span> <span class="token string">'文本域'</span><span class="token punctuation">,</span>
    selected<span class="token operator">:</span> <span class="token string">'sj'</span><span class="token punctuation">,</span>
    checked<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 这是文本框, 文本域, 以及下拉选择共同使用的事件处理函数</span>
  <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 判断 当前事件目标是不是复选框,如果是,使用checked, 如果不是,使用value</span>
            <span class="token keyword">let</span> value <span class="token operator">=</span> name <span class="token operator">===</span> <span class="token string">'checked'</span> <span class="token operator">?</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked <span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> value
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 文本框 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">'text'</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">'msg'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 文本域 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>textarea
          id<span class="token operator">=</span><span class="token string">''</span>
          cols<span class="token operator">=</span><span class="token string">'30'</span>
          rows<span class="token operator">=</span><span class="token string">'10'</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>area<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">'area'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 下拉框 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>select
          name<span class="token operator">=</span><span class="token string">'selected'</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selected<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">'selected'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">'cf'</span><span class="token operator">&gt;</span>吃饭<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">'sj'</span><span class="token operator">&gt;</span>睡觉<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">'ddd'</span><span class="token operator">&gt;</span>打豆豆<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 复选框 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">'checkbox'</span>
          checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>checked<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">'checked'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="非受控组件"><a href="#非受控组件" class="header-anchor">#</a> 非受控组件</h3> <p>借助于 ref，使用原生 DOM 方式来获取表单元素值</p> <p>ref 的作用：获取 DOM 或组件</p> <h4 id="实现方式-2"><a href="#实现方式-2" class="header-anchor">#</a> 实现方式:</h4> <ol><li><p>调用 React.createRef() 方法创建一个 ref 对象</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span>txtRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>将创建好的 ref 对象添加到文本框中</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>通过 ref 对象获取到文本框的值</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="案例-todo案例"><a href="#案例-todo案例" class="header-anchor">#</a> 案例- todo案例</h2> <h2 id="组件的生命周期"><a href="#组件的生命周期" class="header-anchor">#</a> 组件的生命周期</h2> <p><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">生命周期图谱<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <img src="/assets/img/react生命周期.1bc8e2a9.png"> <h3 id="组件的生命周期三个大阶段"><a href="#组件的生命周期三个大阶段" class="header-anchor">#</a> 组件的生命周期三个大阶段</h3> <h4 id="挂载阶段"><a href="#挂载阶段" class="header-anchor">#</a> 挂载阶段</h4> <blockquote><p>constructor  ==&gt; render ==&gt; componentDidMount</p></blockquote> <p><strong>constructor</strong>: 创建组件时，最先执行 . 一般用于: 1. 初始化state  2. 为事件处理程序绑定this</p> <p><strong>render</strong>: 每次组件渲染都会触发  注意: 不能在render中调用setState()</p> <p><strong>componentDidMount:</strong> 组件挂载(完成DOM)渲染后   一般用于: 1. 发送网络请求  2. DOM操作</p> <h4 id="更新阶段"><a href="#更新阶段" class="header-anchor">#</a> 更新阶段</h4> <blockquote><p>render  ==&gt;  componentDidUpdate</p> <p>setState() , forceUpdate(), 组件接收到新的props  都会导致更新</p></blockquote> <p><strong>componentDidUpdate:</strong> 组件更新(完成DOM渲染)后</p> <p>1 发送网络请求 2 DOM操作   注意：如果要setState() 必须放在一个if条件中</p> <h4 id="卸载阶段"><a href="#卸载阶段" class="header-anchor">#</a> 卸载阶段</h4> <blockquote><p>componentWillUnmount</p></blockquote> <p>**componentWillUnmount:**组件卸载(从页面中消失） 执行清理操作</p> <h3 id="旧版react生命周期-了解"><a href="#旧版react生命周期-了解" class="header-anchor">#</a> 旧版react生命周期(了解)</h3> <blockquote><p>componentWillMount</p> <p>componentWillUpdate,</p> <p>componentWillReceiveProps</p> <p>以上生命周期钩子函数在React v16.3后废弃</p></blockquote> <img src="/assets/img/react完整生命周期.a2bda42c.png"> <h2 id="组件通讯"><a href="#组件通讯" class="header-anchor">#</a> 组件通讯</h2> <blockquote><p>react组件通讯有三种方式.分别是props, context, pubsub</p></blockquote> <h3 id="props"><a href="#props" class="header-anchor">#</a> props</h3> <blockquote><p>单向数据流 父传子</p></blockquote> <img src="data:image/png;base64,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" width="400px"> <h3 id="context"><a href="#context" class="header-anchor">#</a> context</h3> <blockquote><p>爷孙嵌套 传递</p></blockquote> <img src="/assets/img/context传值.9b2b295b.png" width="400px"> <p>**实现一: **</p> <ul><li><p>调用 React. createContext() 创建 Provider（提供数据） 和 Consumer（消费数据） 两个组件</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> Consumer <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token string">'默认值'</span><span class="token punctuation">)</span> 
<span class="token comment">// 注意: 默认值是在没有提供provider的时候生效,而不是没有写value的时候生效</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>使用 Provider 组件作为父节点, 使用value属性定义要传递的值</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>要传递的值<span class="token punctuation">}</span><span class="token operator">&gt;</span> 
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span> 
    <span class="token operator">&lt;</span>Child1 <span class="token operator">/</span><span class="token operator">&gt;</span> 
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>使用Consumer组件接收数据</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>data参数表示接收到的数据 <span class="token operator">--</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>**实现二: **</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token comment">// 给要使用的Context的Demo类,添加静态contextType属性, 并赋值为context对象</span>
    <span class="token comment">// 那么在Demo的实例对象上context属性中就可以获取到需要的值</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> MyContext
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// return &lt;MyContext.Consumer&gt;{data =&gt; &lt;p&gt;{data}&lt;/p&gt;}&lt;/MyContext.Consumer&gt;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>**注意:**不要使用context随意传递数据,一般用于传递&quot;全局&quot;数据, 比如当前认证的用户、主题或首选语言</p> <h3 id="pubsub"><a href="#pubsub" class="header-anchor">#</a> pubsub</h3> <blockquote><p>发布订阅机制</p> <p>pubsubjs是一个用JavaScript编写的库。</p> <p>利用订阅发布模式, 当一个组件的状态发生了变化，可以让其他多个组件更新这些变化.</p></blockquote> <img src="/assets/img/pubsub传值.ffca2f5a.png" width="450px"> <p><strong>实现:</strong></p> <ul><li><p>安装</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>在项目根目录下<span class="token operator">:</span> npm install pubsub<span class="token operator">-</span>js <span class="token operator">/</span> yarn add pubsub<span class="token operator">-</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>导入</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> PubSub <span class="token keyword">from</span> <span class="token string">&quot;pubsub-js&quot;</span> <span class="token comment">// 导入的PubSub是一个对象.提供了发布/订阅的功能</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>pubsubjs提供的方法</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//  一个用于接收订阅信息的函数(接收外部传入的数据的函数)</span>
<span class="token comment">// PubSub.subscribe() 用于订阅信息(相当于监听某个组件内部数据变化)</span>
<span class="token comment">// TOPIC ==&gt; 订阅话题.推荐使用常量</span>
<span class="token comment">// 第二个参数: 用于接收数据的函数</span>
<span class="token comment">// token 这一次订阅的令牌(用于取消订阅)</span>
<span class="token keyword">var</span> token <span class="token operator">=</span> PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token constant">TOPIC</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> msg<span class="token punctuation">,</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 以异步的形式的发布一个话题 </span>
<span class="token comment">// TOPIC 通过这个话题,找到订阅这个话题的订阅者</span>
<span class="token comment">// 'hello world!' 具体要传递的数据</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token constant">TOPIC</span><span class="token punctuation">,</span> <span class="token string">'hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 发布的同步使用方法</span>
<span class="token comment">// 慎用!!!! 因为会阻塞发布者的代码执行</span>
PubSub<span class="token punctuation">.</span><span class="token function">publishSync</span><span class="token punctuation">(</span><span class="token constant">TOPIC</span><span class="token punctuation">,</span> <span class="token string">'hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消指定的订阅</span>
PubSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消某个话题的所有订阅</span>
PubSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token constant">TOPIC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取消所有订阅</span>
PubSub<span class="token punctuation">.</span><span class="token function">clearAllSubscriptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li></ul> <h2 id="fragment"><a href="#fragment" class="header-anchor">#</a> Fragment</h2> <blockquote><p>react组件中只能有一个根组件.</p> <p>之前使用div包裹的方式会给html结构增加很多无用的层级</p> <p>为了解决这个问题,可以使用React.Fragment</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token comment">// 渲染到页面之后,这个div就是一个多余的</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>fragment<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello react<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token comment">// 将上面的写法,修改为下面的写法</span>
<span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token comment">// 这样就只会渲染h1和p</span>
      <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>fragment<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello react<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> 
<span class="token punctuation">}</span>

<span class="token comment">// 简写形式</span>
<span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token comment">// 这是React.Fragment的简写形式</span>
      <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>fragment<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello react<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="react性能优化"><a href="#react性能优化" class="header-anchor">#</a> React性能优化</h2> <ul><li><p>减轻state 跟页面渲染无关的数据,不要放在state中(比如定时器的id.不要放在state中)</p> <ul><li>可以有效减少页面重新渲染次数</li></ul></li> <li><p>shouldComponentUpdate (减轻不必要的重新渲染)</p> <ul><li><p>**组件更新的机制: **父组件重新渲染时，也会重新渲染子组件</p></li> <li><p>如何避免不必要的重新渲染呢？</p></li> <li><p>解决方式：使用钩子函数 shouldComponentUpdate(nextProps, nextState)</p></li> <li><p>作用：通过返回值决定该组件是否重新渲染，返回 true 表示重新渲染，false 表示不重新渲染</p></li> <li><p>触发时机：更新阶段的钩子函数，组件重新渲染前执行 （shouldComponentUpdate =&gt; render）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 父组件</span>
<span class="token keyword">class</span> <span class="token class-name">Far</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    num<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 返回min~max之间的随机整数(包含min和max)</span>
  <span class="token function">getRandomIntInclusive</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span>
    max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min <span class="token comment">//含最大值，含最小值</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRandomIntInclusive</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      num
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//有效减少组件渲染次数</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this.state 原来的state</span>
    <span class="token comment">// state 最新的state</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num <span class="token operator">!==</span> state<span class="token punctuation">.</span>num 
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父组件渲染了'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1 onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">}</span><span class="token operator">&gt;</span>Far组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Son num<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 不管子组件有没有用到父组件的数据,只要父组件重新渲染了,子组件就会跟着渲染</span>

<span class="token comment">// 子组件</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">//有效减少组件渲染次数</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this.props 原来的props</span>
    <span class="token comment">// props 最新的props</span>
    <span class="token keyword">return</span> props<span class="token punctuation">.</span>num <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>num 
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Son组件渲染了'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Son组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div></li></ul></li> <li><p>纯组件 pureComponet</p> <ul><li><p>PureComponent  与 React.Component 功能相似,直接替换即可</p></li> <li><p>区别：PureComponent 内部自动实现了 shouldComponentUpdate 钩子，不需要手动比较</p></li> <li><p>原理：纯组件内部通过分别 对比 前后两次 props 和 state 的值，来决定是否重新渲染组件</p></li> <li><p>**注意: **纯组件内部的对比是 shallow compare（浅层对比）</p> <ul><li>对于引用类型来说：只比较对象的引用（地址）是否相同</li> <li>所以,state 或 props 中属性值为引用类型时，应该创建新数据，不要直接修改原数据</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Far</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    obj<span class="token operator">:</span> <span class="token punctuation">{</span>
      num<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">getRandomIntInclusive</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span>
    max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min <span class="token comment">//含最大值，含最小值</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 错误的写法</span>
    <span class="token comment">// 重新设置的obj和上一次的obj是同一个.</span>
    <span class="token comment">// 组件不会重新渲染了</span>
    <span class="token comment">// let num = this.getRandomIntInclusive(1, 3)</span>
    <span class="token comment">// let obj = this.state.obj 或者 let {obj} = this.state</span>
    <span class="token comment">// obj.num = num</span>
     
    <span class="token comment">// 正确的写法:</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRandomIntInclusive</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token comment">// 创建一个新的对象</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> num <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      obj
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父组件渲染了'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1 onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">}</span><span class="token operator">&gt;</span>Far组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Son num<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></li></ul></li></ul> <h2 id="react-forwardref-不常用-可以通过props传递"><a href="#react-forwardref-不常用-可以通过props传递" class="header-anchor">#</a> React.forwardRef(不常用.可以通过props传递)</h2> <blockquote><p>函数组件不可以添加ref属性</p> <p>作用: 将函数组件内部的元素,交给父组件使用</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 实现: </span>
<span class="token comment">// App组件</span>
<span class="token keyword">const</span> ref <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在app组件中,通过ref获取到了button的Dom对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ref<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token comment">// 使用React.forwardRef包装后的FancyButton就可以添加ref属性了</span>
        <span class="token operator">&lt;</span>FancyButton ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token operator">&gt;</span>Click me<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>FancyButton<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// FancyButton</span>
<span class="token keyword">const</span> FancyButton <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> ref<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>button ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">'FancyButton'</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 你可以直接获取 DOM button 的 ref：</span>
<span class="token keyword">const</span> ref <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>FancyButton ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token operator">&gt;</span>Click me<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>FancyButton<span class="token operator">&gt;</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="portal"><a href="#portal" class="header-anchor">#</a> Portal</h2> <blockquote><p>Portal 提供了一种将子节点渲染到存在于父组件以外的 DOM 节点的优秀的方案</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
		<span class="token comment">// 在app组件中使用了portal组件</span>
		<span class="token comment">// 但是渲染dom的时候,portal的内容不在这个div中</span>
        <span class="token operator">&lt;</span>Portal<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Portal<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Portal</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'modal'</span><span class="token operator">&gt;</span>模态框<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
    <span class="token comment">// 当前portal组件不直接返回元素,而是返回一个portal</span>
    <span class="token comment">// react底层会将node的内容,渲染到this.container中</span>
    <span class="token keyword">return</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>container<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="高阶组件-hoc-higherordercomponent"><a href="#高阶组件-hoc-higherordercomponent" class="header-anchor">#</a> 高阶组件(HOC higherOrderComponent)</h2> <ul><li>**高阶组件的作用: ** 提供复用的状态逻辑</li> <li><strong>高阶组件是什么:</strong>  高阶组件（HOC）是 React 中用于复用组件逻辑的一种高级技巧。HOC 自身不是 React API 的一部分，它是一种基于 React 的组合特性而形成的设计模式
<ul><li><strong>简单理解的话:</strong> 一个拥有复用逻辑的函数,这个函数需要传入一个组件,然后返回一个增强的组件</li></ul></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> EnhancedComponent <span class="token operator">=</span> <span class="token function">higherOrderComponent</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><strong>高阶组件实现</strong></p> <ol><li>调用函数,得到增强组件,渲染增强组件</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> EnhancedComponent <span class="token operator">=</span> <span class="token function">higherOrderComponent</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注意: </span>
<span class="token number">1.</span> 函数名一般以<span class="token keyword">with</span>开头<span class="token punctuation">,</span>使用小驼峰命名法
<span class="token number">2.</span> <span class="token function">函数中形参要采用大驼峰命名法</span><span class="token punctuation">(</span>因为这个参数接收的是一个组件<span class="token punctuation">)</span>
<span class="token number">3.</span> 返回的也是一个组件<span class="token punctuation">,</span>所以也要使用大驼峰命名法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <ol><li><p>使用es7的修饰符</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  @higherOrderComponent
  <span class="token keyword">class</span> <span class="token class-name">WrappedComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>- **高阶组件要注意的问题:**

  1. 配合chrome调试工具显示组件名的问题

     &lt;img src=&quot;./imgs/displayName.png&quot;&gt;

   **解决: **

  给高阶组件中返回的组件, 增加一个静态属性displayName 

  ```javascript
  static displayName = `XXX(${WrappedComponent.displayName ||WrappedComponent.name ||'Component'})`
  
  //原理: 调试工具,优先展示组件的displayName

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol><li>传递props的问题</li></ol> <img src="/assets/img/props传参.6cba56d9.png"> <img src="/assets/img/login1.c3c8d204.png"> <h2 id="render-props"><a href="#render-props" class="header-anchor">#</a> render props</h2> <p>**render props的作用: **提供共享的状态逻辑</p> <p>**render props是什么: **指一种在 React 组件之间使用一个值为函数的 prop 共享代码的简单技术</p> <p>​			<strong>简单理解:</strong> 实现多个组件状态和逻辑共享的技术(复用)</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token comment">// 原来直接在这里渲染Cat和Mouse组件</span>
        <span class="token comment">// 使用了render props技术之后, 在这里使用封装了共享状态逻辑的组件,</span>
        <span class="token comment">// 真正要渲染的Cat和Mouse需要当做render这个prop的返回值传进去</span>
        <span class="token operator">&lt;</span>Position render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">pos</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Cat <span class="token punctuation">{</span><span class="token operator">...</span>pos<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Position<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Position render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">pos</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Mouse <span class="token punctuation">{</span><span class="token operator">...</span>pos<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Position<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>**render props 思路分析: **</p> <ol><li>将复用的状态和逻辑代码封装到一个组件中 (比如命名为Position),</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Position</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token comment">// 定义共享状态</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
    
    <span class="token comment">// 根据具体需求逻辑定义共享逻辑代码,比如</span>
    <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>         
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol><li><p>在这个组件上添加一个render属性. render属性的值是一个函数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Position  render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>把要真正渲染到页面的组件,当做箭头函数的返回值</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token operator">&lt;</span>Position  render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token operator">&lt;</span>Cat <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>这个组件render的函数可以接收组件中的状态数据</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token operator">&lt;</span>Position  render<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token parameter">pos</span> <span class="token operator">=&gt;</span><span class="token operator">&lt;</span>Cat <span class="token punctuation">{</span><span class="token operator">...</span>pos<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>在Position中通过this.props.render()得到真正要渲染的组件</li></ol></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//Position组件</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol><li>并在在调用this.props.render的时候,将Position组件中的数据,传递给render属性指向的函数</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//Position组件</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//App组件</span>
<span class="token comment">// pos接收Position中传递过来的数据,然后再传递给Cat组件</span>
 <span class="token operator">&lt;</span>Position render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">pos</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Cat <span class="token punctuation">{</span><span class="token operator">...</span>pos<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Position<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <ul><li><em>Hook</em> 是 React 16.8 的新增特性。它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性</li> <li>Hook也叫钩子，本质就是函数，能让你使用 React 组件的状态和生命周期函数...</li> <li>Hook 还没有完全替代class,但是未来会逐步替代</li></ul> <h3 id="为什么有hook"><a href="#为什么有hook" class="header-anchor">#</a> 为什么有Hook?</h3> <ul><li>组件复用状态逻辑比较难 (HOC和render props 写起来比较麻烦),Hook 使你在无需修改组件结构的情况下复用状态逻辑</li> <li>解决了this难以理解的问题</li> <li>希望可以逐渐取代class</li></ul> <h3 id="usestate-基本使用"><a href="#usestate-基本使用" class="header-anchor">#</a> useState()基本使用</h3> <blockquote><p>可以在单个组件中,多次使用</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//导入 useState </span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 声明一个叫 &quot;count&quot; 的 state 变量</span>
  <span class="token comment">// 2. setCount 是用来操作count的方法</span>
  <span class="token comment">// 3. useState的值表示count的初始化值</span>
  <span class="token comment">// 4. 在后续的重新渲染中，useState 返回的第一个值将始终是更新后最新的 state</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          Click me
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="useeffect-基本使用"><a href="#useeffect-基本使用" class="header-anchor">#</a> useEffect() 基本使用</h3> <blockquote><p>可以在单个组件中多次使用</p> <p>这个Hook,相当于componentDidMount, componentDidUpdate和componentWillUnmount的组合</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//先导入</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 相当于 componentDidMount 和 componentDidUpdate</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token comment">// 相当于componentWillUnmount</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// 完成一些清除工作...</span>
    <span class="token punctuation">}</span>
  <span class="token comment">// 如果在useEffect的第二个参数,传入一个空的数组,则useEffect只相当于componentDidMount</span>
  <span class="token comment">// 数组中可以传入state或porps数据,传入到数组的数据,就是被监听的数据,只要这些数据中有一个的值发生变化,这个函数才会重新执行</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>count<span class="token punctuation">,</span> props<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="hook规则"><a href="#hook规则" class="header-anchor">#</a> Hook规则:</h3> <ol><li>只在最顶层使用 Hook(函数组件内顶级作用域),<strong>不要在循环，条件或嵌套函数中调用 Hook</strong> <ul><li>我们可以在单个组件中使用多个 State Hook 或 Effect Hook, React 靠的是 Hook 调用的顺序,来确定哪个state对应的哪个useState</li></ul></li> <li>只在 React 函数中调用 Hook,<strong>不要在普通的 JavaScript 函数中调用 Hook</strong>(类组件也不支持Hook)
<ul><li>在 React 的函数组件中调用 Hook</li> <li>在自定义 Hook 中调用其他 Hook</li></ul></li></ol> <h3 id="官方提供的hooks介绍"><a href="#官方提供的hooks介绍" class="header-anchor">#</a> 官方提供的Hooks介绍</h3> <ul><li><a href="https://react.docschina.org/docs/hooks-reference.html#basic-hooks" target="_blank" rel="noopener noreferrer">基础 Hook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><a href="https://react.docschina.org/docs/hooks-reference.html#usestate" target="_blank" rel="noopener noreferrer"><code>useState</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#useeffect" target="_blank" rel="noopener noreferrer"><code>useEffect</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#usecontext" target="_blank" rel="noopener noreferrer"><code>useContext</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#additional-hooks" target="_blank" rel="noopener noreferrer">额外的 Hook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li><a href="https://react.docschina.org/docs/hooks-reference.html#usereducer" target="_blank" rel="noopener noreferrer"><code>useReducer</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#usecallback" target="_blank" rel="noopener noreferrer"><code>useCallback</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#usememo" target="_blank" rel="noopener noreferrer"><code>useMemo</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#useref" target="_blank" rel="noopener noreferrer"><code>useRef</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#useimperativehandle" target="_blank" rel="noopener noreferrer"><code>useImperativeHandle</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#uselayouteffect" target="_blank" rel="noopener noreferrer"><code>useLayoutEffect</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://react.docschina.org/docs/hooks-reference.html#usedebugvalue" target="_blank" rel="noopener noreferrer"><code>useDebugValue</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/theme-reco/theme.html">
            react脚手架使用
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-cb1513f6></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.92907b7c.js" defer></script><script src="/assets/js/3.cd5a62f0.js" defer></script><script src="/assets/js/1.0809a8e1.js" defer></script><script src="/assets/js/7.9a48380b.js" defer></script>
  </body>
</html>
